<!DOCTYPE html>
<html lang="pt-br">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Simulado Pol√≠cia Federal - Avan√ßado</title>

<style>
body{
    font-family: Arial, sans-serif;
    background:#0f172a;
    color:white;
    margin:0;
    text-align:center;
}
header{
    background:#111827;
    padding:15px;
    font-size:22px;
    font-weight:bold;
}
.container{ padding:20px; }

button{
    padding:10px 15px;
    margin:5px;
    border:none;
    border-radius:5px;
    cursor:pointer;
    font-weight:bold;
}

.discipline-btn{ background:#1e40af; color:white; }
.option-btn{ background:#374151; color:white; width:80%; display:block; margin:10px auto; }
.option-btn:hover{ background:#2563eb; }

#timer,#score{ font-size:18px; margin-bottom:10px; }

.card{
    background:#1f2937;
    padding:15px;
    border-radius:10px;
    margin:10px auto;
    width:90%;
    max-width:600px;
}
</style>
</head>
<body>

<header>Simulado Concurso Pol√≠cia Federal</header>

<div class="container">

<div id="menu">
<h3>Escolha a Disciplina</h3>

<button class="discipline-btn" onclick="startQuiz('Portugues')">Portugu√™s</button>
<button class="discipline-btn" onclick="startQuiz('Constitucional')">Constitucional</button>
<button class="discipline-btn" onclick="startQuiz('Penal')">Penal</button>
<button class="discipline-btn" onclick="startQuiz('Informatica')">Inform√°tica</button>

<hr>
<h3>Modo Simulado Completo</h3>
<button class="discipline-btn" onclick="startSimulado()">Iniciar Simulado Geral</button>

</div>

<div id="quizArea" style="display:none;">
<div id="timer"></div>
<div id="score"></div>
<h3 id="question"></h3>
<div id="options"></div>
</div>

<div id="resultado"></div>
<div id="ranking"></div>
<div id="estatisticas"></div>

</div>

<script>

/* ============================
BANCO DE QUEST√ïES (MODELO)
Estrutura pronta para 100+
============================ */

const questions = {

Portugues:[
{question:"Assinale a alternativa correta.",options:["Houveram erros","Houve erros","Existiram erro","Fazem dois anos"],correct:1},
{question:"Crase √© usada:",options:["Antes de verbo","Antes de palavra masculina","Antes de palavra feminina espec√≠fica","Nunca"],correct:2},
{question:"Concord√¢ncia correta:",options:["Os aluno chegou","Os alunos chegaram","Os aluno chegaram","O alunos chegou"],correct:1}
],

Constitucional:[
{question:"Compete √† Pol√≠cia Federal:",options:["Julgar crimes","Exercer pol√≠cia judici√°ria da Uni√£o","Policiamento ostensivo","Legislar"],correct:1},
{question:"A Constitui√ß√£o √©:",options:["Lei ordin√°ria","Lei complementar","Norma suprema","Decreto"],correct:2}
],

Penal:[
{question:"Crime √©:",options:["Fato t√≠pico, il√≠cito e culp√°vel","Qualquer conduta","Apenas dolo","Somente culpa"],correct:0},
{question:"Dolo √©:",options:["Vontade consciente","Erro","Neglig√™ncia","Imprud√™ncia"],correct:0}
],

Informatica:[
{question:"Phishing √©:",options:["Ataque de engenharia social","Backup","Firewall","Antiv√≠rus"],correct:0},
{question:"Firewall serve para:",options:["Editar texto","Proteger rede","Formatar PC","Criar v√≠rus"],correct:1}
]

};

/* ============================
VARI√ÅVEIS
============================ */

let quizQuestions=[];
let currentQuestion=0;
let score=0;
let timer;
let timeLeft=0;
let disciplinaAtual="";

/* ============================
INICIAR DISCIPLINA
============================ */

function startQuiz(disciplina){
disciplinaAtual=disciplina;
quizQuestions=[...questions[disciplina]];
iniciarJogo(quizQuestions.length * 20);
}

/* ============================
MODO SIMULADO (MISTURA TUDO)
============================ */

function startSimulado(){
disciplinaAtual="Simulado Geral";
quizQuestions=[];
Object.values(questions).forEach(arr=>{
quizQuestions=quizQuestions.concat(arr);
});
quizQuestions.sort(()=>Math.random()-0.5);
iniciarJogo(quizQuestions.length * 20);
}

/* ============================
INICIAR JOGO
============================ */

function iniciarJogo(tempoTotal){
document.getElementById("menu").style.display="none";
document.getElementById("quizArea").style.display="block";
document.getElementById("resultado").innerHTML="";

currentQuestion=0;
score=0;
timeLeft=tempoTotal;

startTimer();
loadQuestion();
}

/* ============================
TIMER
============================ */

function startTimer(){
timer=setInterval(()=>{
timeLeft--;
document.getElementById("timer").innerText="Tempo: "+timeLeft+"s";
if(timeLeft<=0){ endQuiz(); }
},1000);
}

/* ============================
CARREGAR QUEST√ÉO
============================ */

function loadQuestion(){
let q=quizQuestions[currentQuestion];
document.getElementById("score").innerText="Pontua√ß√£o: "+score;
document.getElementById("question").innerText=q.question;

let optionsDiv=document.getElementById("options");
optionsDiv.innerHTML="";

q.options.forEach((option,index)=>{
let btn=document.createElement("button");
btn.innerText=option;
btn.className="option-btn";
btn.onclick=()=>checkAnswer(index);
optionsDiv.appendChild(btn);
});
}

/* ============================
CHECAR RESPOSTA
============================ */

function checkAnswer(index){
if(index===quizQuestions[currentQuestion].correct){
score+=10;
}
currentQuestion++;
if(currentQuestion<quizQuestions.length){
loadQuestion();
}else{
endQuiz();
}
}

/* ============================
FINALIZAR
============================ */

function endQuiz(){
clearInterval(timer);
document.getElementById("quizArea").style.display="none";

let percentual=Math.round((score/(quizQuestions.length*10))*100);

document.getElementById("resultado").innerHTML=
`<div class="card">
<h2>Fim do ${disciplinaAtual}</h2>
<p>Pontua√ß√£o: ${score}</p>
<p>Aproveitamento: ${percentual}%</p>
<button onclick="location.reload()">Voltar</button>
</div>`;

salvarEstatisticas(disciplinaAtual,percentual);
salvarRanking(score);
mostrarRanking();
mostrarEstatisticas();
}

/* ============================
RANKING
============================ */

function salvarRanking(score){
let ranking=JSON.parse(localStorage.getItem("rankingPF"))||[];
ranking.push(score);
ranking.sort((a,b)=>b-a);
ranking=ranking.slice(0,5);
localStorage.setItem("rankingPF",JSON.stringify(ranking));
}

function mostrarRanking(){
let ranking=JSON.parse(localStorage.getItem("rankingPF"))||[];
let div=document.getElementById("ranking");
div.innerHTML="<div class='card'><h3>üèÜ Ranking</h3>";
ranking.forEach((s,i)=>{
div.innerHTML+=`<p>${i+1}¬∫ - ${s} pts</p>`;
});
div.innerHTML+="</div>";
}

/* ============================
ESTAT√çSTICAS POR DISCIPLINA
============================ */

function salvarEstatisticas(disciplina,percentual){
let stats=JSON.parse(localStorage.getItem("statsPF"))||{};
if(!stats[disciplina]) stats[disciplina]=[];
stats[disciplina].push(percentual);
localStorage.setItem("statsPF",JSON.stringify(stats));
}

function mostrarEstatisticas(){
let stats=JSON.parse(localStorage.getItem("statsPF"))||{};
let div=document.getElementById("estatisticas");
div.innerHTML="<div class='card'><h3>üìä Estat√≠sticas</h3>";

for(let disc in stats){
let media=Math.round(stats[disc].reduce((a,b)=>a+b)/stats[disc].length);
div.innerHTML+=`<p>${disc}: M√©dia ${media}%</p>`;
}

div.innerHTML+="</div>";
}

mostrarRanking();
mostrarEstatisticas();

</script>

</body>
</html>
